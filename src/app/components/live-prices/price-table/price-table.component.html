<div class="rounded-xl overflow-hidden">
  <table mat-table [dataSource]="dataSource" class="w-full border-0">
    <!-- Rank Column -->
    <ng-container matColumnDef="rank">
      <th mat-header-cell *matHeaderCellDef class="text-primary text-sm font-light">
        #
      </th>
      <td mat-cell *matCellDef="let element" class="text-secondary text-sm">
        {{ element.rank }}
      </td>
    </ng-container>

    <!-- Coin Column -->
    <ng-container matColumnDef="coin">
      <th mat-header-cell *matHeaderCellDef class="text-primary text-sm font-extralight">
        Coin
      </th>
      <td mat-cell *matCellDef="let element">
        <div class="flex items-center gap-3">
          <!-- <img [src]="element.icon" [alt]="element.symbol" class="w-8 h-8 rounded-full" 
               (error)="$event.target.src='assets/images/default-crypto.png'"> -->
          <div>
            <div class="text-primary font-bold">{{ element.name }}</div>
            <div class="text-secondary text-sm">{{ element.symbol }}</div>
          </div>
        </div>
      </td>
    </ng-container>

    <!-- Price Column -->
    <ng-container matColumnDef="price">
      <th mat-header-cell *matHeaderCellDef class="text-primary text-sm font-extralight">
        Price
      </th>
      <td mat-cell *matCellDef="let element" class="text-primary font-medium">
        ${{ element.price | number : "1.2-2" }}
      </td>
    </ng-container>

    <!-- 24h Change Column -->
    <ng-container matColumnDef="change24h">
      <th mat-header-cell *matHeaderCellDef class="text-primary text-sm font-extralight">
        24h %
      </th>
      <td mat-cell *matCellDef="let element">
        <span [class]="element.change24h >= 0 ? 'text-success' : 'text-error'">
          {{ element.change24h >= 0 ? "▲" : "▼"
          }}{{ element.change24h | number : "1.2-2" }}%
        </span>
      </td>
    </ng-container>

    <!-- 7d Change Column -->
    <ng-container matColumnDef="change7d">
      <th mat-header-cell *matHeaderCellDef class="text-primary text-sm font-extralight">
        7d %
      </th>
      <td mat-cell *matCellDef="let element">
        <span [class]="element.change7d >= 0 ? 'text-success' : 'text-error'">
          {{ element.change7d >= 0 ? "▲" : "▼"
          }}{{ element.change7d | number : "1.2-2" }}%
        </span>
      </td>
    </ng-container>

    <!-- Market Cap Column -->
    <ng-container matColumnDef="marketCap">
      <th mat-header-cell *matHeaderCellDef class="text-primary text-sm font-extralight">
        Market Cap
      </th>
      <td mat-cell *matCellDef="let element" class="text-primary">
        ${{ element.marketCap / 1000000000 | number : "1.1-1" }}B
      </td>
    </ng-container>

    <!-- Volume Column -->
    <ng-container matColumnDef="volume24h">
      <th mat-header-cell *matHeaderCellDef class="text-primary text-sm font-extralight">
        Volume (24h)
      </th>
      <td mat-cell *matCellDef="let element" class="text-primary">
        ${{ element.volume24h / 1000000000 | number : "1.1-1" }}B
      </td>
    </ng-container>

    <!-- Supply Column -->
    <ng-container matColumnDef="supply">
      <th mat-header-cell *matHeaderCellDef class="text-primary text-sm font-extralight">
        Circulating Supply
      </th>
      <td mat-cell *matCellDef="let element" class="text-primary">
        {{ element.circulatingSupply | number : "1.0-0" }} {{ element.symbol }}
      </td>
    </ng-container>

    <!-- Chart Column -->
    <ng-container matColumnDef="chart">
      <th mat-header-cell *matHeaderCellDef class="text-primary text-sm font-extralight">
        Last 90 Days
      </th>
      <td mat-cell *matCellDef="let element">
        <div class="w-16 h-8">
          <svg viewBox="0 0 64 32" class="w-full h-full">
            <polyline [attr.points]="getChartPoints(element.chartData)"
              [attr.stroke]="element.change7d >= 0 ? '#00C087' : '#FF3E46'" stroke-width="2" fill="none" />
          </svg>
        </div>
      </td>
    </ng-container>

    <!-- Actions Column -->
    <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef></th>
      <td mat-cell *matCellDef="let element">
        <button class="bg-action text-primary px-3 py-1 rounded-lg text-sm hover:opacity-90">
          Trade
        </button>
      </td>
    </ng-container>

    <!-- Favorite Column -->
    <ng-container matColumnDef="favorite">
      <th mat-header-cell *matHeaderCellDef></th>
      <td mat-cell *matCellDef="let element">
        <button (click)="toggleFavorite(element)" class="text-secondary hover:text-warning">
          <svg class="w-4 h-4" [class.fill-warning]="element.isFavorite" fill="none" stroke="currentColor"
            viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z">
            </path>
          </svg>
        </button>
      </td>
    </ng-container>

    <!-- Header Row -->
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>

    <!-- Data Rows -->
    <tr mat-row *matRowDef="let row; columns: displayedColumns"
      class="hover:bg-dark-primary !border-transparent transition-colors"></tr>
  </table>
</div>