<div class="relative">
  <!-- Normal Button -->
  <button *ngIf="variant === 'normal'" [class]="buttonClasses" (click)="onClick()" [disabled]="disabled">
    <!-- Dynamic Lucide icon -->
    <div class="flex-1">
      <lucide-icon *ngIf="lucideIcon && iconPosition =='left'" [name]="lucideIcon" [img]="getIconImage"
        [size]="iconSize"></lucide-icon>
      <span [class]="`text-center ${textSize}`">{{ label }}</span>
    </div>

    <div class="flex justify-right"
      [ngClass]="lucideIcon === arrowRightIcon ? 'bg-success/80 rounded-2xl p-2 text-semibold' : ''">
      <lucide-icon *ngIf="lucideIcon && iconPosition =='right'" [name]="lucideIcon" [img]="getIconImage"
        [size]="iconSize"></lucide-icon>
    </div>

  </button>


  <!-- Toggle Switch Button -->
  <div *ngIf="variant === 'toggle'"
    [class]="`flex ${bgColor} rounded-2xl py-2 px-1 text-primary ${dropShadow} w-fit`">
    <button *ngFor="let option of toggleOptions" (click)="selectToggleOption(option)" [class]="'flex items-center gap-2 px-3 py-2 rounded-full text-sm font-normal transition-all duration-200 ' + 
                 (selectedToggleValue === option.value ? 'bg-action border-1 border-black' : 'hover:text-primary')"
      [disabled]="disabled">
      <!-- Icon for toggle option -->
      <lucide-icon *ngIf="option.lucideIcon" [img]="getToggleIconImage(option.lucideIcon)" [size]="16"></lucide-icon>
      <span>{{ option.label }}</span>
    </button>
  </div>

  <!-- Sidebar toggle -->
  <div *ngIf="variant === 'sidebar-toggle'">
    <button
      [class]="'text-md font-bold border-2 bg-dark-primary border-dark-secondary rounded-full text-md px-2 py-2 text-secondary hover:text-primary hover:border-dark-secondary hover:bg-dark-secondary transition-all duration-200'">
      <div *ngFor="let option of toggleOptions">
        <lucide-icon *ngIf="option.show && option.lucideIcon" [img]="getToggleIconImage(option.lucideIcon)"
          [size]="16"></lucide-icon>
      </div>
    </button>
  </div>

  <!-- Dropdown Button -->
  <div *ngIf="variant === 'dropdown'" class="relative">
    <button [class]="buttonClasses" (click)="onClick()" [disabled]="disabled">
      <span>{{ selectedOption?.label || label }}</span>
      <lucide-icon [img]="icons.ChevronDown" [size]="20" class="transition-transform duration-200"
        [class.rotate-180]="isDropdownOpen"></lucide-icon>
    </button>

    <!-- Dropdown Menu -->
    <div *ngIf="isDropdownOpen" class="absolute z-10 w-full bg-dark-secondary rounded-xl shadow-lg">
      <div class="py-0">
        <button *ngFor="let option of dropdownOptions" (click)="selectOption(option)"
          class="w-full px-4 py-2 text-sm text-secondary hover:bg-dark-primary text-left transition-colors duration-200">
          {{ option?.label || option.value }}
        </button>
      </div>
    </div>
  </div>